# Serialization

* Serialization과 Deserialization이란?

  > * 직렬화의 기본 메커니즘은 객체를 1차원 비트 스트림으로 평면화(전송 가능한 형태로 변형)하는 것이고, 역직렬화는 해당 비트스트림을 원래 객체로 되돌리는 것.
  > * 디스크에 쓰거나, 유/무선 통신 메커니즘을 통해 보내는 과정에서의, 나중에 재구성할 수 있는 포맷으로 변환하는 과정을 의미.
  > * 자바에서 직렬화는 JVM 메모리 상에서 실행되고 있는 인스턴스 정보를 바이트코드로 복사하는 과정. 

*  Serializable과 Parcelable 차이점

  * Serializable은 Java의 자동 직렬화 프로세스를 사용함. 내부에서 Reflection을 사용해 직렬화를 처리. 추가 객체 생성으로 인한 성능 저하에서의 부담.
  * Parcelable은 Android SDK의 Interface로, Reflection을 사용하지 않도록 설계됨. 직렬화 처리방법 명시적 작성 필요. -> 구현, 유지/보수성에서의 부담.
  * 속도 비교에 관해 - Serializable보다 Parcelable이 10배 이상 빠르다는 실험 결과가 주축을 이루지만,
    기본사용법에 의한 Serialzable의 경우에서 그렇다는 것일 뿐, Serializable의 직렬화 프로세스를 writeObject(), readObject() 및 readObejctNoData()를 구현으로 대체하면 Parcelable에 비해 쓰기속도는 3배 이상, 읽기 속도는 1.6배 더 빠른 결과를 얻을 수도 있음.

* Deserialization에서의 알려진 취약점

  * 전송받은 데이터를 역직렬화하는 과정에서 데이터 무결성을 검증하지 않고 그대로 서버로 전달한다면,
    원격코드 실행, 인젝션, 권한 상승과 같은 공격에 노출될 수 있음.
  * 대응 방안 :
    * 입력 값 유효성 검사(예 : 바이트수를 제한한 스트림 생성, 클래스 체크 및 개체 수를 제한하여 오브젝트 생성, 검증을 통과한 오브젝트를 읽어 객체로 변환후 리턴)
    * 송수신 데이터 암 복호화 또는 서명 추가
    * 지속적 보안 패치